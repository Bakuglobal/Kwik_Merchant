<ion-content color="primary">
  <ion-toolbar color="primary">
    <ion-buttons slot="start" padding>
      <ion-icon name="arrow-back" (click)="back()"></ion-icon>
    </ion-buttons>
    <ion-buttons slot="end" style="padding-right: 20px;padding-top: 10px;">
      <ion-icon name="trash" class="create" (click)="confirmDelete(product.id)"></ion-icon>
    </ion-buttons>
    <ion-buttons slot="end"(click)="edit = true"*ngIf="edit == false"style="padding-right: 5px;padding-top: 10px;">
      <ion-icon name="create" class="create" ></ion-icon>
    </ion-buttons>
    <ion-buttons slot="end"(click)="edit = false" *ngIf="edit == true" style="padding-right: 5px;padding-top: 10px;">
      <ion-icon name="close" class="create" ></ion-icon>
    </ion-buttons>
    <ion-title *ngIf="view">{{product.product}}</ion-title>
  </ion-toolbar>
  <div class="body">
    <div style="margin-top: 40%;text-align: center;" *ngIf="!view">
      <ion-spinner name="circles" color="primary"></ion-spinner>
    </div>
    <div *ngIf="view">
      <form [formGroup]="productForm">
        <ion-row padding text-center>
          <ion-col>
            <ion-label class="title">Click on image to change</ion-label><br><br>
            <ion-icon name="arrow-dropright" color="medium" class="right"></ion-icon>
          </ion-col>
          <ion-col size="4">
            <img class="image" alt="image" [src]="product.image" (click)="imageupdate()">
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product Name :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.product}}</ion-label>
            <ion-input type="text" formControlName="product" value="{{product.product}}" *ngIf="edit"></ion-input>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product Barcode :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.barcode}}</ion-label>
            <ion-input type="text" formControlName="barcode" value="{{product.barcode}}" *ngIf="edit"></ion-input>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product Category :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.category}}</ion-label>
            <ion-select formControlName="category" *ngIf="edit" placeholder="{{product.category}}">
              <ion-select-option *ngFor="let item of category.categories">{{item.name}}</ion-select-option>
            </ion-select>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Available Quantity :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits"*ngIf="!edit">{{product.stock}}</ion-label>
            <ion-input type="text" formControlName="stock" value="{{product.stock}}"*ngIf="edit"></ion-input>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product Unit :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.quantity}}</ion-label>
            <ion-input type="text" formControlName="quantity" value="{{product.quantity}}"*ngIf="edit"></ion-input>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product Price :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.currentprice}}</ion-label>
            <ion-input type="text" formControlName="currentprice" value="{{product.currentprice}}"*ngIf="edit"></ion-input>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product Description :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.description}}</ion-label>
            <textarea type="text" formControlName="description" value="{{product.description}}"*ngIf="edit"></textarea>
          </ion-col>
        </ion-row>
        <ion-row padding>
          <ion-col>
            <ion-label>Product status :</ion-label>
          </ion-col>
          <ion-col style="text-align:right">
            <ion-label class="edits" *ngIf="!edit">{{product.status}}</ion-label>
            <ion-select formControlName="status" *ngIf="edit" placeholder="{{product.status}}">
              <ion-select-option checked>Available</ion-select-option>
              <ion-select-option>Unavailable</ion-select-option>
            </ion-select>
          </ion-col>
        </ion-row>

        <ion-button disabled expand="block" shape="round" style="margin-top: 50px;" [disabled]="!edit" (click)="saveChanges(product.id)">
          Save Changes
        </ion-button>
      </form>
    </div>
  </div>
</ion-content>